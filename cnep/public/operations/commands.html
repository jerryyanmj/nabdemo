<!DOCTYPE html>

<html lang="en" ng-app="app">

	<head>

		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<!--<link rel="shortcut icon" href="/cnep/imgs/timewarnercablelogo.ico">-->
		<title>CNEP: Accenture Customer Network Experience Platform</title>
		<link href="/cnep/css/bootstrap.css" rel="stylesheet" type="text/css">
		<link href="/cnep/css/starter-template.css" rel="stylesheet" type="text/css">
		<link href="/cnep/css/nv.d3.css" rel="stylesheet" type="text/css">
		<link href="/cnep/bootstrap/examples/starter-template/starter-template.css" rel="stylesheet" type="text/css">
		<link href="/cnep/datatables-plugins/integration/bootstrap/3/dataTables.bootstrap.css" rel="stylesheet" type="text/css">
		<link href="/cnep/bootstrap-form-helpers/dist/css/bootstrap-formhelpers.min.css" rel="stylesheet" type="text/css"/>
		<script src="/cnep/jquery/dist/jquery.min.js" type="text/javascript"></script>
    	<script src="/cnep/jquery/dist/jquery.js" type="text/javascript"></script>
    	<script src="/cnep/bootstrap/dist/js/bootstrap.min.js" type="text/javascript"></script>
    	<script src="/cnep/bootstrap/dist/js/bootstrap.js" type="text/javascript"></script>
    	<script src="/cnep/bootstrap-form-helpers/dist/js/bootstrap-formhelpers.min.js" type="text/javascript"></script>
		<script src="/cnep/bootstrap-form-helpers/dist/js/bootstrap-formhelpers.js" type="text/javascript"></script>
		<script src="/cnep/d3/d3.js" type="text/javascript"></script>
		<script src="/cnep/nvd3/nv.d3.js" type="text/javascript"></script>
		<script src="/cnep/datatables/media/js/jquery.dataTables.min.js" type="text/javascript"></script>
		<script src="/cnep/datatables/media/js/jquery.dataTables.js" type="text/javascript"></script>
		<script src="/cnep/datatables-plugins/integration/bootstrap/3/dataTables.bootstrap.js" type="text/javascript"></script>    
		<script src="/cnep/js/common/app.js" type="text/javascript"></script>
		<script>

			$( document ).ready(

				function() {

					$( "#predefined_commands" ).change(

						function() {

							var	choosen_command_text = $( this ).val()

							$( '#command' ).val( choosen_command_text );

							return;
						}
					);

					$( '#schdules-btn' ).click( 

						function() {

							$( '#addform' ).show();
							$( '#schdules-btn' ).hide();

							return;
						}
					);

					$( '#agentCommandsTable' ).dataTable(
						{
							"aaSorting": [[ 6, "asc" ]]
						}
					);

					return;
				}
			);

		</script>

		<style>

			html, body {height:100%;padding-top:25px;position:relative;overflw-y:scroll;margin: 0;}

			div.dataTables_info {float: left !important;}

			.inp {
				width:150px; 
				display:inline;
			}

			.inp3 {
				width:90px; 
				display:inline;
			}

			th {text-align: center;}

			.predefined_commands {

				float: left;
				margin-top: 10px;

			}

			.unknown_agent_commands {

				color: gray;

			}

			.expired_commands {

				color: red;

			}

			.bfh-datepicker-calendar { color: black !important; }
			.bfh-datepicker-toggle > .form-control { color: white !important; }
			.bfh-timepicker-toggle > .form-control { color: white !important; }
			.bfh-datepicker-toggle > .input-group-addon { color: black !important; }
			.bfh-timepicker-toggle > .input-group-addon { color: black !important; }

			#agentCommandsTable_length label {float: left !important; padding-top: 20px;}
			#agentCommandsTable_filter label {float: right !important;}
			#agentCommandsTable_filter input {float: right !important;}

		</style>

	</head>

	<body>

		<% include ../partials/nav.html %>
		<% include ../partials/error.html %>
		<div class="container">
			<div class="starter-template">
				<h1>Commands for agent: <%= session.aid %></h1>
			</div>
		</div>

		<div style="text-align: center;" class="container" id="container1" ng-view-light>    

			<table id="agentCommandsTable" class="table table-striped table-bordered" style="background-color: white; color: black;font-family:'Helvetica';">

				<thead>
					<tr>
						<th>ID</th>
						<th>COMMAND</th>
						<th>QUANTITY</th>        
						<th>FREQUENCY</th>        
						<th>PRIORITY</th>
						<th>START</th>
						<th>END</th>
						<th>ACTIVE</th>
						<th>EDIT</th>
						<th>DELETE</th>
					</tr>
				</thead>

				<tbody>
	
					<%

						var	trClass = "";
						for( var i = 0; i < session.commands.length; i++ ) {

							trClass = "";
							if( session.commands[ i ].is_expired == true ) {

								trClass = "class=expired_commands";

							}
							else if( session.agentIsUnknownFlag == 1 ) {

								trClass = "class=unknown_agent_commands";

							}

					%>

						<tr <%= trClass %>>
							<td><%= session.commands[ i ].mid %></td>        
							<td><%= session.commands[ i ].text %></td>                  
							<td><%= session.commands[ i ].repeat %></td>                
							<td><%= session.commands[ i ].frequency %></td>                
							<td><%= session.commands[ i ].priority %></td>                  
							<td><%= session.commands[ i ].start %></td>                  
							<td><%= session.commands[ i ].end %></td>                  
							<td><%= session.commands[ i ].active %></td>

						<% if( session.agentIsUnknownFlag == 0 ) { %>

							<td><a href="/cnep/commands/edit/<%= session.commands[ i ].mid %>">EDIT</a></td>
							<td><a href="/cnep/commands/delete/<%= session.commands[ i ].mid %>">DELETE</a></td>

						<% } else { %>

							<td>&nbsp;</td>
							<td>&nbsp;</td>

						<% } %>

					</tr>

					<% } %>
				</tbody>    
			</table>

			<div id="schdules-btn" style="float:left" class="a btn btn-primary">
				Add New Command
			</div>

			<div class="row well" id="addform" style="display:none">

				<div class="col-md-12">

					<form class="form-inline" action="/commands/create/" method="POST">

						<div id="command-tools" class="row">

							<div class="col-md-3">

								<input id="command" name="command" placeholder="command text" value="" class="form-control" />
								<input id="aid" name="aid" type="hidden" value="<%= session.aid %>" />
								<input id="cid" name="cid" type="hidden" value="<%= session.cid %>" />
	
								<select id="predefined_commands" class="predefined_commands">
									<option value="">Choose the command</option>
									<option value="mtr -n -c 5 --report ">MTR</option>
									<option value="tcpdump-batch eth0">Tcpdump</option>
									<option value="speedtest-cli">Speedtest</option>
								</select>

							</div>

							<div class="col-md-2" style="width:350px"> 
								<input id="new-job-repeat" name="quantity" placeholder="quantity" class="form-control inp3" />
								<input id="interval" placeholder="frequency" name="frequency"  class="form-control inp3" />
								<input id="new-job-priority" placeholder="priority" name="priority" class="form-control inp3" />
							</div>

							<div class="col-md-2">
								<div class="bfh-datepicker"  data-format="y-m-d" data-name="datestart">
									<input id="start-datepickers" name="startdate" data-name="startdate" type="text" class="datepicker">
								</div>
								<div data-name="timestart" class="bfh-timepicker" name="startime">
									<input id="start-timepickers" name="starttime" type="text" class="timepicker">
								</div>
							</div>

							<div class="col-md-2">
								<div class="bfh-datepicker"  data-format="y-m-d" data-name="dateend">
									<input id="end-datepickers" name="enddate" type="text" data-name="enddate" class="datepicker">
								</div>
								<div data-name="timeend" class="bfh-timepicker" name="endtime">
									<input id="end-timepickers" name="endtime" type="text" class="timepicker">
								</div>
							</div>

							<div id="form-btn-inline" class="col-md-1">
								<button type="submit" name="submit" class="btn btn-info btn-block" style="width:100px; display: inline">Schedule</button>
							</div>
						</div>
						<div class="row">
							<div id="variables" style="text-align:center" class="col-md-12"></div>
						</div>
						<div class="row">
							<div id="buttons" class="col-md-12"></div>
						</div>
					</form>
				</div>
			</div>
			<div class="row">
				<div class="col-md-12"></div>
			</div>
	
			<br><br><br>    
	
		</div>

	</body>

</html>
